var MiniPy=function(e){var n=function(){function e(e,n){this.type=n.type||"Unknown Error",this.message=n.message||"",this.from=n.from||void 0,this.to=n.to||void 0}return e.prototype.toString=function(){var e="";return this.range.length>0&&("number"==typeof this.range[0].line&&(e+=" (line "+(this.range[0].line+1)),e+="number"==typeof this.range[0].column?", column "+(this.range[0].column+1)+")":")"),this.type+" "+this.message+e},e}(),t=function(e){function n(e){this.line=0,this.column=0,this.nextIndex=0,this.input=e}return n.prototype.peek=function(){if(this.nextIndex<this.input.length){var e=this.input[this.nextIndex];return e}return null},n.prototype.next=function(){if(this.nextIndex<this.input.length){var e=this.input[this.nextIndex];return this.nextIndex++,"\n"===e?(this.line++,this.column=0):this.column++,e}return null},n.prototype.EOF=function(){return this.nextIndex>=this.input.length},n.prototype.error=function(n){return new e(this.input,n)},n}(n),r=function(){function e(e,n,t,r,i,o){switch(this.lexer=e,this.type=n,n){case"Numeric":if(this.raw=t,this.value=parseFloat(t),isNaN(this.value))throw this.error({type:a.MALFORMED_NUMBER,message:"Could not parse number"});break;case"Boolean":this.raw=t,this.value="True"===t;break;case"String":this.raw='"'+t+'"',this.value=t;break;default:this.value=t}this.line=r,this.column=i,this.EOL=o===!0?!0:!1}return e.prototype.getValue=function(){return null!==this.value?this.value:this.type},e.prototype.getLength=function(){return void 0!=this.raw?this.raw.length:void 0!=this.value?this.value.length:0},e.prototype.error=function(e){return this.lexer.error({type:e.type,message:e.message,from:e.from||{line:this.line,column:this.column},to:e.to||{line:this.line,column:this.column+this.getLength()}})},e}(),i=function(e){function n(n){function t(e){return y.indexOf(e)>=0}function r(e){return m.indexOf(e)>=0}function i(){return"\n"===n.peek()||n.EOF()?!0:!1}function o(e){return(e>="a"&&"z">=e||e>="A"&&"Z">=e)&&null!==e}function s(e){return e>="0"&&"9">=e&&null!==e}function u(e){return"True"===e||"False"===e}function l(e,n){return e.indexOf(n)>=0}function c(){if(g.length>0)return g.shift();if(n.EOF()===!0)return null;var m=n.peek();if(" ">=m){if("\n"===m){var y="";n.next();for(var d=n.line,v=n.column;"	"===(m=n.peek());)y+=n.next();if(n.peek()>" ")y.length>x[0]?(x.unshift(y.length),g.push(new e(f,"Indent",null,d,v))):y.length<x[0]&&(x.shift(),g.push(new e(f,"Dedent",null,d,v)));else if(n.EOF()&&x.length>1)for(;x.length>1;)x.shift(),g.push(new e(f,"Dedent",null,d,v));return c()}return n.next(),c()}if("#"===m){for(;;){if(m=n.peek(),""===m||"\n"===m)break;n.next()}return c()}if(o(m)||"_"===m){for(var w="Identifier",d=n.line,v=n.column,P=n.next();;){if(m=n.peek(),null===m)break;if(!o(m)&&!s(m)&&"_"!==m)break;P+=n.next()}return t(P)?w="Punctuator":r(P)?w="Keyword":u(P)&&(w="Boolean"),new e(f,w,P,d,v,i())}if(s(m)){for(var w="Numeric",d=n.line,v=n.column,P=n.next();(m=n.peek())&&s(m);)P+=n.next();if("."===m)for(P+=n.next();;){if(m=n.peek(),!s(m))break;P+=n.next()}if("e"===m||"E"===m){if(P+=n.next(),m=n.peek(),("-"===m||"+"===m)&&(P+=n.next(),m=n.peek()),!s(m))throw n.error({type:a.EXPECTED_DIGIT,message:"Incorrect exponent syntax, expected a digit",from:{line:n.line,column:n.column},to:{line:n.line,column:n.column+1}});do P+=n.next(),m=n.peek();while(s(m))}if(o(m))throw n.error({type:a.EXPECTED_DIGIT,message:"Expected a digit",from:{line:n.line,column:n.column},to:{line:n.line,column:n.column+1}});return new e(f,w,P,d,v,i())}if('"'===m||"'"===m){for(var w="String",d=n.line,v=n.column,k=n.next(),P="";;){if(m=n.peek(),null===m)throw n.error({type:a.UNTERMINATED_STRING,message:"Unterminated string, expecting a matching end quote instead got end of program",from:{line:d,column:v},to:{line:n.line,column:n.column+1}});if(" ">m)throw"\n"===m||"\r"===m||""===m?(n.next(),n.error({type:a.UNTERMINATED_STRING,message:"Unterminated string, expecting a matching end quote",from:{line:d,column:v},to:{line:n.line,column:n.column}})):n.error({type:a.UNEXPECTED_CHAR,message:"Control character in string",from:{line:n.line,column:n.column},to:{line:n.line,column:n.column+1}});if(m===k){n.next();break}if("\\"===m)switch(P+=n.next(),n.next()){case"\n":break;case"\\":P+="\\";break;case"'":P+="'";break;case'"':P+='"';break;case"a":P+="a";break;case"b":P+="\b";break;case"f":P+="\f";break;case"n":P+="\n";break;case"r":P+="\r";break;case"t":P+="	"}else P+=n.next()}return new e(f,w,P,d,v,i())}if(l(p,m)||l(E,m)){var w="Punctuator",d=n.line,v=n.column,P=n.next();return l(p,P)&&l(h,n.peek())&&(P+=n.next()),new e(f,w,P,d,v,i())}throw n.error({type:a.UNEXPECTED_CHAR,message:"Unexpected character",from:{line:n.line,column:n.column},to:{line:n.line,column:n.column+1}})}var f=this,p="=<>+-*/&|%^~!",h="=<>+-*/&|",E=",:()[]{}",m=["as","assert","break","class","continue","def","del","elif","else","except","exec","finally","for","from","global","if","import","in","lambda","pass","raise","return","try","while","with","yield"],y=["and","is","not","or"],x=[0],g=[],d=[];this.peek=function(e){if("number"==typeof e&&1>e)return d[d.length+e]||null;if("number"==typeof e&&e>1)throw new Error("Cannot peek forward more than 1 token");if(g.length>0)return g[0];var n=c();return null!==n?(g.push(n),n):null},this.next=function(){var e=c();return null!==e&&d.push(e),e},this.EOF=function(){return n.EOF()&&0===g.length},this.error=function(e){return n.error(e)}}return n}(r),o=function(){function e(e){function n(e){if("number"==typeof arguments[1])var n=new r.nodes.parselets.Prefix(arguments[1]);else var n=arguments[1];r.register("prefix",e,n)}function t(e){if("number"==typeof arguments[1])var n=new r.nodes.parselets.Infix(arguments[1]);else var n=arguments[1];r.register("infix",e,n)}var r=this;this.lexer=e,this.symbols={prefixParselets:{},infixParselets:{}},this.nodes={expressions:{Program:function(e){this.type="Program",this.body=e,this.error=function(e){return r.lexer.error(e)}},Atom:function(e){"Identifier"===e.type?this.type="Identifier":(this.type="Literal",this.subtype=e.type),this.value=e.getValue(),this.line=e.line,this.column=e.column,this.EOL=e.EOL||!1,this.error=function(n){return e.error(n)}},Prefix:function(e,n){this.type="UnaryExpression",this.operator=e,this.right=n,this.line=e.line,this.column=e.column,this.EOL=n.EOL||!1,this.error=function(t){switch(t.type){case a.UNEXPECTED_EOF:case a.EXPECTED_NEWLINE:return n.error(t);default:return e.error(t)}}},Infix:function(e,n,t){this.type="="===e.getValue()?"AssignmentExpression":"BinaryExpression",this.operator=e,this.left=n,this.right=t,this.line=e.line,this.column=e.column,this.EOL=t.EOL||!1,this.error=function(n){switch(n.type){case a.UNEXPECTED_EOF:case a.EXPECTED_NEWLINE:return t.error(n);default:return e.error(n)}}},Call:function(e,n,t){this.type="CallExpression",this.callee=e,this.arguments=n,this.line=e.line,this.column=e.column,this.EOL=t.EOL,this.error=function(n){switch(n.type){case a.UNEXPECTED_EOF:case a.EXPECTED_NEWLINE:return t.error(n);default:return n.from={line:e.line,column:e.column},n.to={line:t.line,column:t.column+1},e.error(n)}}},If:function(e,n,t,r,i){this.type="IfStatement",this.condition=n,this.ifBlock=t,this.elifBlocks=r,this.elseBlock=i,this.line=e.line,this.column=e.column,this.EOL=!0,this.error=function(n){var o=t;null!==i?o=i.block:null!==r.length&&r.length>0&&(o=r[r.length-1]);var s=o[o.length-1];switch(n.type){case a.UNEXPECTED_EOF:case a.EXPECTED_NEWLINE:return s.error(n);default:return e.error(n)}}},While:function(e,n,t){this.type="WhileStatement",this.condition=n,this.block=t,this.line=e.line,this.column=e.column,this.EOL=!0,this.error=function(n){var r=t[t.length-1];switch(n.type){case a.UNEXPECTED_EOF:case a.EXPECTED_NEWLINE:return r.error(n);default:return e.error(n)}}}},parselets:{Atom:function(){var e=0;this.parse=function(e,n){return new r.nodes.expressions.Atom(n)},this.getPrecedence=function(){return e}},Prefix:function(e){this.parse=function(n,t){var i=n.parseExpression(e);return new r.nodes.expressions.Prefix(t,i)},this.getPrecedence=function(){return e}},Infix:function(e){this.parse=function(n,t,i){var o=n.parseExpression(e);if(t.EOL===!0)throw t.error({type:a.UNEXPECTED_CHAR,message:"Right operand must be on the same line"});if("="===t.value&&"Identifier"!==i.type)throw i.error({type:a.UNEXPECTED_TOKEN,message:"Left operand must be an identifier"});return new r.nodes.expressions.Infix(t,i,o)},this.getPrecedence=function(){return e}},Group:function(){var e=80;this.parse=function(e,n){var t=e.parseExpression();return r.next("Punctuator",")"),t},this.getPrecedence=function(){return e}},Call:function(){var e=80;this.parse=function(e,n,t){for(var i=[];null===r.peek("Punctuator",")");){var o=e.parseExpression();if(o.EOL===!0)throw o.error({type:a.UNEXPECTED_CHAR,message:'Expected ")" after argument'});if(i.push(o),null===r.peek("Punctuator",","))break;r.next("Punctuator",",")}var s=r.next("Punctuator",")");return new r.nodes.expressions.Call(t,i,s)},this.getPrecedence=function(){return e}},If:function(){var e=100;this.parse=function(e,n){var t=r.parseExpression();r.next("Punctuator",":");for(var i=r.parseBlock(),o=[];null!==r.peek("Keyword","elif");){var s=r.next("Keyword","elif"),u=r.parseExpression();r.next("Punctuator",":");var a=r.parseBlock();o.push({type:"ElifStatement",condition:u,block:a,line:s.line,column:s.column,EOL:!0})}0===o.length&&(o=null);var l=null;if(null!==r.peek("Keyword","else")){var c=r.next("Keyword","else");r.next("Punctuator",":"),l={type:"ElseStatement",block:r.parseBlock(),line:c.line,column:c.column,EOL:!0}}return new r.nodes.expressions.If(n,t,i,o,l)},this.getPrecedence=function(){return e}},While:function(){var e=100;this.parse=function(e,n){var t=r.parseExpression();r.next("Punctuator",":");var i=r.parseBlock();return new r.nodes.expressions.While(n,t,i)},this.getPrecedence=function(){return e}}}},n("Atom",new r.nodes.parselets.Atom),n("(",new r.nodes.parselets.Group),t("=",10),t("and",30),t("or",30),t(">",30),t(">=",30),t("<",30),t("<=",30),t("==",30),t("!=",30),t("+",50),t("-",50),t("*",60),t("/",60),t("**",80),n("+",70),n("-",70),n("not",70),n("!",70),t("(",new r.nodes.parselets.Call),n("if",new r.nodes.parselets.If),n("while",new r.nodes.parselets.While)}return e.prototype.peek=function(e,n){var t=this.lexer.peek();return void 0===e?t:null===t?null:t.type===e?void 0===n?t:t.getValue()===n?t:null:null},e.prototype.next=function(e,n){var t=this.lexer.next();if(void 0===e)return t;if(null!==t&&t.type===e){if(void 0===n)return t;if(t.getValue()===n)return t}if(null===t){var r=this.lexer.peek(-1),i='"'+(n||e)+'"';throw'"Indent"'===i?i="new line and indentation":'"Dedent"'===i&&(i="end of line"),r.error({type:a.UNEXPECTED_EOF,message:"Unexpected end of file. Expected "+i})}var o=this.lexer.peek(-2)||t,s='"'+t.getValue()+'"';'"Indent"'===s?s="new line and indentation":'"Dedent"'===s?s="end of line":o=t;var i='"'+(n||e)+'"';'"Indent"'===i?i="new line and indentation":'"Dedent"'===i&&(i="end of line");var u="Unexpected "+s+". Expected "+i,l=this.lexer.peek(-2);throw null!==l&&(u+=' after "'+l.getValue()+'"'),o.error({type:a.UNEXPECTED_TOKEN,message:u})},e.prototype.register=function(e,n,t){"prefix"===e?this.symbols.prefixParselets[n]=t:"infix"===e&&(this.symbols.infixParselets[n]=t)},e.prototype.getPrecedence=function(){if(null!==this.peek()){var e=this.symbols.infixParselets[this.getTokenSymbol(this.peek())];if(void 0!==e)return e.getPrecedence()}return 0},e.prototype.getTokenSymbol=function(e){return"Punctuator"===e.type||"Keyword"===e.type?e.getValue():"Atom"},e.prototype.parseExpression=function(e){e=e||0;var n=this.next();if(null===n){var t=this.lexer.peek(-1);throw t.error({type:a.UNEXPECTED_EOF,message:"Unexpected end of file"})}var r=this.symbols.prefixParselets[this.getTokenSymbol(n)];if(void 0===r){if("string"==typeof n.type)var i=n.type.toLowerCase();else var i="symbol";throw n.error({type:a.UNKNOWN_OPERATOR,message:"Unexpected "+i+' "'+n.getValue()+'"'})}for(var o=r.parse(this,n);e<this.getPrecedence();){n=this.next("Punctuator");var s=this.symbols.infixParselets[this.getTokenSymbol(n)];o=s.parse(this,n,o)}return o},e.prototype.parseBlock=function(){this.next("Indent");for(var e=[];null===this.peek("Dedent");){var n=this.parseExpression();if(e.push(n),n.EOL===!1)throw n.error({type:a.EXPECTED_NEWLINE,message:"Expected newline after "+n.type})}return this.next("Dedent"),e},e.prototype.parseProgram=function(){for(var e=[];this.lexer.EOF()===!1;){var n=this.parseExpression();if(e.push(n),this.lexer.EOF()===!0&&n.EOL===!1)throw n.error({type:a.EXPECTED_NEWLINE,message:"Expected newline after expression"})}return new this.nodes.expressions.Program(e)},function(n){this.parse=function(t){var r=new e(n).parseProgram();return t===!0?JSON.parse(JSON.stringify(r)):r}}}(),s=function(){function e(e){this.parent=e||null,this.local={}}return e.prototype.setErrorGenerator=function(e){this.errorGenerator=e},e.prototype.isLocal=function(e){return this.local.hasOwnProperty(e)?!0:!1},e.prototype.get=function(e){var n=e.value;if(this.isLocal(n))return this.local[n];if(null!==this.parent&&"function"==typeof this.parent.get)return this.parent.get(n);throw this.errorGenerator({type:"ReferenceError",message:'No variable with identifier "'+n+'"',from:{line:e.line,column:e.column},to:{line:e.line,column:e.column+n.length}})},e.prototype.set=function(e,n){var t=e.value||e.toString();this.isLocal(t)?this.local[t]=n:null!==this.parent?this.parent.set(t,n):this.local[t]=n},e}(),u=function(e){function n(e,n){var t;return function(){return e&&(t=e.apply(n||this,arguments),e=null),t}}function t(t,r){function i(e){return t.error(e)}function o(e){x.length>0&&(x.map(function(n){n.call({},e)}),x=[])}function s(e,n){y.indexOf(e)>=0&&g[e]instanceof Array&&g[e].forEach(function(e){n instanceof Array||(n=[n]),x.push(function(t){e.apply(t||{},n)})})}function u(e){w.push(e)}function l(){return w.pop()}function c(e){function n(n){return e.operator.error({type:a.UNSUPPORTED_OPERATION,message:n})}function t(e,t,r){if(t!==r){var i='Unsupported operation "'+e+'" on type "'+r+'"';throw n(i)}}function r(n){return e.operator.error({type:a.UNSUPPORTED_OPERATION,message:n})}function i(e,n,t,i,o){if(i!==n||t!==o){var s='Unsupported operation "'+e+'" for type(s) "'+i+'" and "'+o+'"';throw r(s)}}switch(e.type){case"Literal":return e.value;case"Identifier":return E.get(e);case"AssignmentExpression":var o=e.left,l=c(e.right);E.set(o,l),s("assign",[o.value,l]);break;case"UnaryExpression":var p=c(e.right),h=typeof p;switch(e.operator.getValue()){case"+":return t("+","number",h),p;case"-":return t("-","number",h),-1*p;case"!":case"not":return t(e.operator.getValue(),"boolean",h),p===!1;default:throw e.operator.error({type:"SyntaxError",message:'Unknown operator: "'+e.operator.getValue()+'"',from:{line:e.line,column:e.column},to:{line:e.line,column:e.column+1}})}break;case"BinaryExpression":var o=c(e.left),p=c(e.right),m=typeof o,h=typeof p;switch(e.operator.getValue()){case"+":return o+p;case"-":return i("-","number","number",m,h),o-p;case"*":return i("*","number","number",m,h),o*p;case"/":return i("/","number","number",m,h),o/p;case"%":return i("%","number","number",m,h),o%p;case"**":return i("**","number","number",m,h),Math.pow(o,p);case"//":return i("//","number","number",m,h),Math.floor(o/p);case">":return o>p;case">=":return o>=p;case"<":return p>o;case"<=":return p>=o;case"==":return o===p;case"and":return i("and","boolean","boolean",m,h),o===!0&&p===!0;case"!=":return o!==p;case"or":return o||p;default:throw e.operator.error({type:"SyntaxError",message:'Unknown operator: "'+e.operator.getValue()+'"'})}case"CallExpression":var y=e.callee.value;if("print"===y)s("print",c(e.arguments[0]));else{var x=E.get(e.callee);if("function"==typeof x){var g=e.arguments.map(c);return x.apply({},g)}e.callee.error({type:a.UNSUPPORTED_OPERATION,message:'"'+y+'" is not a function'})}break;case"IfStatement":var d=c(e.condition);if(d===!0)u(function(){return f(e.ifBlock)});else{var v=[];null!==e.elifBlocks&&(v=e.elifBlocks),null!==e.elseBlock&&v.push(e.elseBlock);var w=function(e){if(e.length>0){var n=e[0];if("ElifStatement"===n.type){var t=c(n.condition);return u(t===!0?function(){return f(n.block)}:function(){return w(e.slice(1))}),{type:"ElifStatement",line:n.line}}if("ElseStatement"===n.type)return u(function(){return f(n.block)}),{type:"ElseStatement",line:n.line}}};v.length>0&&u(function(){return w(v)})}break;case"WhileStatement":var d=c(e.condition),P=function(){u(function(){var n=c(e.condition);return n===!0&&u(function(){return f(e.block,P)}),{type:"WhileStatement",line:e.line}})};d===!0&&u(function(){return f(e.block,P)})}}function f(e,n){if(e.length>0){var t=e[0],r={type:t.type,line:p(t)};return e.length>1&&u(function(){return f(e.slice(1),n)}),c(t),1===e.length&&"function"==typeof n&&n(),r}}function p(e){return e.line}function h(e,n){y.indexOf(e)>=0&&"function"==typeof n&&(g[e]instanceof Array?g[e].push(n):g[e]=[n])}var E=new e;E.setErrorGenerator(i),r=r||{};for(var m in r)r.hasOwnProperty(m)&&E.set(m,r[m]);var y=["assign","print","exit"],x=[],g=g||{},d=n(function(){s("load")}),v=n(function(){s("exit")}),w=[];return{load:function(e){e=e||{};for(var n in e)e.hasOwnProperty(n)&&h(n,e[n]);d(),u(function(){return f(t.body)})},next:function(){var e=l();if("function"==typeof e){var n=e.apply({},[]);return o(n),n}return v(),o(null),null},on:h}}return t}(s),a={UNEXPECTED_EOF:1,UNEXPECTED_TOKEN:2,UNKNOWN_OPERATOR:3,EXPECTED_NEWLINE:4,EXPECTED_DIGIT:5,UNTERMINATED_STRING:6,UNEXPECTED_CHAR:7,MALFORMED_NUMBER:8,UNSUPPORTED_OPERATION:9,TIMEOUT:10},l={MiniPyError:n||null,ErrorType:a,Scanner:t||null,Lexer:i||null,Parser:o||null,Interpreter:u||null},c=e(l);return"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(module.exports=c),c}(function(e){function n(e){return e+"\n"}function t(t,r){t=n(t),r=r||{};try{var i=new e.Scanner(t),o=new e.Lexer(i),s=new e.Parser(o);s.parse();return!0}catch(u){return u}}function r(t,r){t=n(t),r=r||{};var o=new e.Scanner(t),s=new e.Lexer(o),u=new e.Parser(s),a=u.parse(),l=r.globals||{},c=e.Interpreter(a,l);return c.load(r.hooks||i),c}var i={print:function(e,n){console.log("PRINT: "+e)}},o=2e3;return{validate:t,inspect:r,run:function(t,i){t=n(t),i=i||{};for(var s=r(t,i),u=i.maxLinesExecuted||o,a=0;;){var l=s.next();if(a++,null===l){i.hook&&i.hook.exit&&"function"==typeof i.hook.exit&&i.hook.exit.apply({},[]);break}if(a>=u)throw new e.MiniPyError(t,{type:e.ErrorType.TIMEOUT,message:"Program execution timed out, check for infinite loops"})}},debug:{getAST:function(t){t=n(t);var r=new e.Scanner(t),i=new e.Lexer(r),o=new e.Parser(i),s=o.parse();return s},getScanner:function(n){return new e.Scanner(n)},getLexer:function(n){var t=new e.Scanner(n);return new e.Lexer(t)},MiniPyError:e.MiniPyError,ErrorType:e.ErrorType}}});